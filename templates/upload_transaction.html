{% extends "base.html" %}
{% load staticfiles %}
{% load crispy_forms_tags %}
{% block container %}

<div class="col-12" style="font-size: 12px !important; text-transform: uppercase;">
  <div class="row">
    <div class="col-3">
     {% if image %}
      <center><img src="/media/{{image}}" height="80"  class="rounded"></center>
      {% else %}
      <center><img src="{% if gender == 'Female' %}{% static '/img/avatar4.png' %}{% else %}{% static '/img/avatar1.png' %}{% endif %} " height="80"  class="rounded"></center>
      {% endif %}
      </div>
      <div class="col-9 padAll" style="text-transform: uppercase !important;">
        <h5><button class="btn btn-md btn-default" style="text-transform: uppercase !important;">{{fname}} 
                {% if not lname %}
                {% else %}
              {{lname}}
              {% endif %}</button>
            </h5>
      </div>
      <!-- <div style="width: 40%; float: left; text-align: right">
              <a href="{% url 'all_receipts' m_id %}" style="font-size: 12px !important" class="btn btn-lg btn-info">View All Receipts</a>
      </div>  --> 
    </div>
      <div class="col-md-12" style="padding-top: 10px;">  
       <form  method="post" name="payform" id="payform"  action="" enctype="multipart/form-data">{% csrf_token %}
              <div class="padAll">
                <input type="hidden" class="form-control" name="rootid" value="{{m_id}}">
                <div class="col-md-4 padAll"><strong>Currency</strong></div>
                <div class="col-md-4">
                </div>
                {% for rw in rw %}
                  {% if rw.category == 'currency' %}
                  <label class="custom-control custom-radio">
                  <input id="{{rw.id}}" value="{{rw.name}}"  name="currency" type="radio" class="custom-control-input">
                  <span class="custom-control-indicator"></span>
                  <span class="custom-control-description">{{rw.name}}</span>
                </label>
                {% endif %}
                  {% endfor %}
              </div>


              <div data-ng-app="" data-ng-init="rendered=;amount=">
                <!-- <div class="padAll" style="width: 30%; float: left; padding: 5px">
                <input type="hidden" class="form-control" value=""  ng-model="rendered" name="amount" placeholder="Tendered">
                </div> -->
                <div class="padAll" style="width: 30%; float: left; padding: 5px">
                <input type="text"  class="form-control" value=""  ng-model="amount" name="amount" placeholder="Amount Paid">
                </div>
                <div class="padAll" style="width: 70%; float: left; padding: 5px; font-size: 16px; text-align: center">
                <b>Amount :</b> <h1>$<span ng-bind="amount"></span></h1>
                </div>
              </div>

              <div class="padAll" style="padding-top:60px;">
                <!-- <p>
                    <select name="purpose" class="form-control">
                      {% for rw in rw %}
                      {% if rw.category == 'income_head' %}
                      <option value="{{rw.name}}">{{rw.name}}</option>
                      {% endif %}
                      {% endfor %}
                    </select>
                </p> -->
              </div>
             
              <div class="col-md-12">
               <div class="col-md-12 padAll"> <strong>Payment Method</strong></div>

                {% for rw in d %}
                  {% if rw.category == 'commitment' %}
                <label class="custom-control custom-radio">
                  <input id="{{rw.id}}" value="{{rw.name}}"  name="commitment" type="radio" class="custom-control-input">
                  <span class="custom-control-indicator"></span>
                  <span class="custom-control-description">{{rw.name}}</span>
                </label>
                {% endif %}
                  {% endfor %}
              </div>

              <div class="col-md-12 padAll" style="padding-top:60px;">
                <a href="#purpose" data-toggle="modal"><h5>Click To Select Purpose</h5></a>

              <div class="modal fade"  id="purpose"  tabindex="-1" role="dialog" aria-labelledby="myModalLabel2">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-body">
                          {% for rw in rw %}
                          {% if rw.category == 'income_head' %}
                          <label class="custom-control custom-radio">
                          <input id="{{rw.id}}" value="{{rw.name}}"  name="purpose" type="radio" class="custom-control-input">
                          <span class="custom-control-indicator"></span>
                          <span class="custom-control-description">{{rw.name}}</span>
                        </label>
                          {% endif %}
                          {% endfor %}
                      </div>
                    </div><!-- modal-content -->
                  </div><!-- modal-dialog -->
                </div><!-- modal -->
              </div>

              
              <div class="pad">
                <input type="text" class="form-control" value="" name="ref" placeholder="Transaction Referrence">
              </div>
              <div class="padAll"> 
              <input type="hidden" class="form-control" value="1" name="user">
               <div class="padAll" style="width: 100px; float: left;">
                  <button type="submit" style="font-size: 16px !important" class="btn btn-lg btn-success">PROCESS PAYMENT</button>
                </div>
                
            </div>
            </div>  
        </form>
      </div>
  </div>  

  <script type="text/javascript">

    function update() {
//Add additional country with id and city array
        var countriesArray = [
                ["weekly", "1", [{% for rw in weekly %}"{{rw.name}}",{% endfor %}]],
                ["monthly", "2", [{% for rw in monthly %}"{{rw.name}}",{% endfor %}]],
                ["onceoff", "3", [{% for rw in onceoff %}"{{rw.name}}",{% endfor %}]]

        ];
//Get country dropdown
        var countries = document.getElementById("1");

//Get city dropdown
        var cities = document.getElementById("2");

//Get country selected item
        var selected = countries.options[countries.selectedIndex].value;

//If country is not "Select Country"
        if (selected != "0") {

//Clear previous cities - this can be moved outside of if condition, and remove the else, if wanted.
            Clear(cities);

//For each country, if it is selected, populate the cities dropdown with its associated city array.

            var country;
            var cityArray;
            for (var i = 0; i < countriesArray.length; i++) {

//Get country
                country = countriesArray[i];
                if (country[1] == selected) {

//Get city array
                    cityArray = country[2];

//Populate options with city array
                    for (var p = 0; p < cityArray.length; p++) {
                        var opt1 = document.createElement('option');
                        opt1.innerHTML = cityArray[p];
                        opt1.value = cityArray[p];
                        cities.appendChild(opt1);
                    }
                }
            }
        }
        else
        {
            Clear(cities);
        }
    }

    function Clear(ctrl)
    {
        ctrl.options.length = 1;
    }
</script>
{% endblock %}
